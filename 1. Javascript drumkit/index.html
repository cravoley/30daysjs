<html>
<head>
    <title>JS Drums</title>
</head>
<link rel="stylesheet" type="text/css" href="style.css">
<body>

<div class="container">
    <ul>
        <li data-key="65" class="key">
            <kbd>a</kbd><span class="soundName">boom</span>
        </li>
        <li data-key="83" class="key">
            <kbd>s</kbd><span class="soundName">clap</span>
        </li>
        <li data-key="68" class="key">
            <kbd>d</kbd><span class="soundName">hihat</span>
        </li>
        <li data-key="70" class="key">
            <kbd>f</kbd><span class="soundName">kick</span>
        </li>
        <li data-key="71" class="key">
            <kbd>g</kbd><span class="soundName">openhat</span>
        </li>
        <li data-key="72" class="key">
            <kbd>h</kbd><span class="soundName">ride</span>
        </li>
        <li data-key="74" class="key">
            <kbd>j</kbd><span class="soundName">snare</span>
        </li>
        <li data-key="75" class="key">
            <kbd>k</kbd><span class="soundName">tink</span>
        </li>
        <li data-key="76" class="key">
            <kbd>l</kbd><span class="soundName">tom</span>
        </li>
    </ul>
</div>


<audio src="sounds/boom.wav" data-key="65" />
<audio src="sounds/clap.wav" data-key="83" />
<audio src="sounds/hihat.wav" data-key="68" />
<audio src="sounds/kick.wav" data-key="70" />
<audio src="sounds/openhat.wav" data-key="71" />
<audio src="sounds/ride.wav" data-key="72" />
<audio src="sounds/snare.wav" data-key="74" />
<audio src="sounds/tink.wav" data-key="75" />
<audio src="sounds/tom.wav" data-key="76" />

<script>

    function play(audio, key){
        audio.currentTime = 0;
        audio.play();
        
        key.classList.add("play");
        key.addEventListener('transitionend', transitionEvent)
    }

    function transitionEvent(e) {        
        if(e.propertyName != 'transform') return;
        this.classList.remove("play");
        this.removeEventListener('transitionend', transitionEvent);
    }

    window.addEventListener('keydown', e => {
        let keyCode = e.keyCode;
        let audioElemet = document.querySelector(`audio[data-key="${keyCode}"]`);
        let key = document.querySelector(`li[data-key="${keyCode}"]`);
        if(!audioElemet || !key) return;

        play(audioElemet, key);

});
</script>
</body>
</html>